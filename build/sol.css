@layer base {
  *, :before, :after {
    box-sizing: border-box;
  }

  html {
    -webkit-text-size-adjust: none;
    -moz-text-size-adjust: none;
    text-size-adjust: none;
    -webkit-tap-highlight-color: transparent;
  }

  @media (prefers-reduced-motion: no-preference) {
    html:focus-within {
      scroll-behavior: smooth;
    }
  }

  body {
    min-height: 100svh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-wrap: break-word;
    max-inline-size: 100%;
    margin: 0;
    font-family: system-ui, sans-serif;
    line-height: 1.5;
  }

  figure {
    margin-inline: 0;
  }

  h1, h2, h3, h4, h5, h6, p, figure, blockquote, dl, ul, ol, hr {
    margin-block: 0;
  }

  h1, h2, h3 {
    line-height: calc(1em + .5rem);
  }

  h1, h2, h3, h4, h5 {
    text-wrap: balance;
  }

  ul[role="list"], ol[role="list"] {
    padding-inline: 0;
    list-style-type: none;
  }

  a:not([class]), u, ins, abbr {
    text-decoration-skip-ink: auto;
    text-underline-offset: .2ex;
  }

  small {
    font-size: 80%;
  }

  sub, sup {
    vertical-align: baseline;
    font-size: 75%;
    line-height: 0;
    position: relative;
  }

  sub {
    bottom: -.25em;
  }

  sup {
    top: -.5em;
  }

  code {
    font-family: monospace-ui, monospace;
    font-size: 1em;
  }

  img, svg, video, canvas {
    block-size: auto;
    max-inline-size: 100%;
  }

  img, video, canvas, audio, iframe, embed, object {
    display: block;
  }

  picture {
    display: contents;
  }

  source {
    display: none;
  }

  table {
    border-collapse: collapse;
    border-color: currentColor;
  }

  input, button, textarea, select {
    font-family: inherit;
    font-size: inherit;
    color: inherit;
    line-height: inherit;
  }

  hr {
    color: inherit;
    border-style: solid;
    border-width: 1px 0 0;
    height: 0;
  }

  button, summary, input[type="submit"], input[type="reset"] {
    cursor: pointer;
  }

  [type="search"] {
    -webkit-appearance: textfield;
  }

  [type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
  }

  button, [type="button"], [type="reset"], [type="submit"], ::-webkit-file-upload-button {
    -webkit-appearance: button;
  }

  ::-webkit-file-upload-button {
    font: inherit;
  }

  [type="number"] {
    height: auto;
  }

  progress {
    vertical-align: baseline;
  }

  :target {
    scroll-margin-top: 2rlh;
  }

  :focus-visible, [id]:target {
    outline-offset: 2px;
    outline: 2px solid;
    transition: outline-offset .2s;
  }

  :disabled {
    cursor: not-allowed;
  }
}

@layer settings;

@layer theme {
  :root {
    --input-padding-size: var(--spacing-4xs);
    --input-radius-size: .15em;
    --input-border-size: 1px;
    --separator-size: 1px;
    --hue-red: 25;
    --hue-pink: 350;
    --hue-purple: 310;
    --hue-violet: 290;
    --hue-indigo: 270;
    --hue-blue: 240;
    --hue-cyan: 210;
    --hue-teal: 185;
    --hue-green: 145;
    --hue-lime: 125;
    --hue-yellow: 100;
    --hue-orange: 75;
  }

  * {
    --color-gray-1: oklch(98% calc(.03 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-2: oklch(96% calc(.06 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-3: oklch(93% calc(.1 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-4: oklch(84% calc(.12 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-5: oklch(80% calc(.16 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-6: oklch(71% calc(.19 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-7: oklch(66% calc(.2 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-8: oklch(58% calc(.21 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-9: oklch(53% calc(.2 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-10: oklch(49% calc(.19 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-11: oklch(42% calc(.17 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-12: oklch(35% calc(.15 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-13: oklch(27% calc(.12 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-14: oklch(20% calc(.09 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-15: oklch(16% calc(.07 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-gray-16: oklch(10% calc(.05 * var(--gray-chroma, 0)) var(--gray-hue, 0));
    --color-primary-1: oklch(98% calc(.03 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (0 * var(--primary-hue-rotate-by))));
    --color-primary-2: oklch(97% calc(.06 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (1 * var(--primary-hue-rotate-by))));
    --color-primary-3: oklch(93% calc(.1 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (2 * var(--primary-hue-rotate-by))));
    --color-primary-4: oklch(84% calc(.12 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (3 * var(--primary-hue-rotate-by))));
    --color-primary-5: oklch(80% calc(.16 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (4 * var(--primary-hue-rotate-by))));
    --color-primary-6: oklch(71% calc(.19 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (5 * var(--primary-hue-rotate-by))));
    --color-primary-7: oklch(66% calc(.2 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (6 * var(--primary-hue-rotate-by))));
    --color-primary-8: oklch(58% calc(.21 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (7 * var(--primary-hue-rotate-by))));
    --color-primary-9: oklch(53% calc(.2 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (8 * var(--primary-hue-rotate-by))));
    --color-primary-10: oklch(49% calc(.19 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (9 * var(--primary-hue-rotate-by))));
    --color-primary-11: oklch(42% calc(.17 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (10 * var(--primary-hue-rotate-by))));
    --color-primary-12: oklch(35% calc(.15 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (11 * var(--primary-hue-rotate-by))));
    --color-primary-13: oklch(27% calc(.12 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (12 * var(--primary-hue-rotate-by))));
    --color-primary-14: oklch(20% calc(.09 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (13 * var(--primary-hue-rotate-by))));
    --color-primary-15: oklch(16% calc(.07 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (14 * var(--primary-hue-rotate-by))));
    --color-primary-16: oklch(10% calc(.05 * var(--primary-chroma, 1)) calc(var(--primary-hue, 250)  + (15 * var(--primary-hue-rotate-by))));
  }

  :root {
    --primary-hue: var(--hue-indigo);
    --primary-hue-rotate-by: 0;
    --primary-chroma: 1;
    --gray-hue: var(--primary-hue);
    --gray-hue-rotate-by: 0;
    --gray-chroma: .1;
  }

  * {
    --color-ink: light-dark(var(--color-gray-14), var(--color-gray-2));
    --color-ink-contrast: light-dark(var(--color-gray-16), var(--color-gray-1));
    --color-ink-highlight: light-dark(var(--color-gray-16), var(--color-gray-16));
    --color-ink-muted: light-dark(var(--color-gray-10), var(--color-gray-4));
    --color-ink-inverse: light-dark(var(--color-gray-2), var(--color-gray-14));
    --color-ink-primary: light-dark(var(--color-primary-10), var(--color-primary-6));
    --color-surface: light-dark(var(--color-gray-2), var(--color-gray-14));
    --color-surface-bright: light-dark(var(--color-gray-1), var(--color-gray-13));
    --color-surface-dim: light-dark(var(--color-gray-3), var(--color-gray-15));
    --color-separator: light-dark(var(--color-gray-5), var(--color-gray-11));
    --color-separator-highlight: light-dark(var(--color-gray-8), var(--color-gray-8));
    --color-shadow: light-dark(var(--color-gray-4), var(--color-gray-16));
    --color-surface-highlight: light-dark(var(--color-primary-3), var(--color-primary-4));
    --color-focus: light-dark(var(--color-primary-10), var(--color-primary-6));
    --color-accent: light-dark(var(--color-primary-10), var(--color-primary-10));
    --color-checked: light-dark(var(--color-primary-2), var(--color-primary-2));
    --color-anchor: light-dark(var(--color-primary-10), var(--color-primary-5));
    --color-anchor-hover: light-dark(var(--color-primary-9), var(--color-primary-4));
    --color-anchor-active: light-dark(var(--color-primary-11), var(--color-primary-6));
  }

  :where(html) {
    --font-size: var(--font-size-value, clamp(1rem, .9rem + .3vw, 1.25rem));
    --font-scale: var(--font-scale-value, 1.25);
    --font-size-xs: calc(var(--font-size) / var(--font-scale));
    --font-size-sm: var(--font-size);
    --font-size-md: calc(var(--font-size-sm) * var(--font-scale));
    --font-size-lg: calc(var(--font-size-md) * var(--font-scale));
    --font-size-xl: calc(var(--font-size-lg) * var(--font-scale));
    --font-size-2xl: calc(var(--font-size-xl) * var(--font-scale));
    --font-size-3xl: calc(var(--font-size-2xl) * var(--font-scale));
    --font-size-4xl: calc(var(--font-size-3xl) * var(--font-scale));
  }

  :root {
    --spacing-size: var(--spacing-size-value, clamp(1rem, calc(.9rem + .3vw), 1.25rem));
    --spacing-scale: var(--spacing-scale-value, 1.25);
    --spacing-4xs: calc(var(--spacing-3xs) / var(--spacing-scale));
    --spacing-3xs: calc(var(--spacing-2xs) / var(--spacing-scale));
    --spacing-2xs: calc(var(--spacing-xs) / var(--spacing-scale));
    --spacing-xs: calc(var(--spacing-size) / var(--spacing-scale));
    --spacing-sm: var(--spacing-size);
    --spacing-md: calc(var(--spacing-sm) * var(--spacing-scale));
    --spacing-lg: calc(var(--spacing-md) * var(--spacing-scale));
    --spacing-xl: calc(var(--spacing-lg) * var(--spacing-scale));
    --spacing-2xl: calc(var(--spacing-xl) * var(--spacing-scale));
    --spacing-3xl: calc(var(--spacing-2xl) * var(--spacing-scale));
    --spacing-4xl: calc(var(--spacing-3xl) * var(--spacing-scale));
    --spacing-5xl: calc(var(--spacing-4xl) * var(--spacing-scale));
    --spacing-6xl: calc(var(--spacing-5xl) * var(--spacing-scale));
    --border-1: 1px;
    --border-2: 2px;
    --radius-square: 0;
    --radius-round: .15em;
    --radius-circle: 100000px;
    --radius-pill: 100000px;
  }

  * {
    --shadow-strength: light-dark(1%, 25%);
    --shadow-chroma: light-dark(3%, 10%);
    --shadow-hue: var(--shadow-tint, var(--primary-hue));
    --shadow-color: 15% var(--shadow-chroma) var(--shadow-hue);
    --inner-shadow-highlight: light-dark(inset 0 -.5px 0 0 #fff, inset 0 .5px 0 0 #0001, inset 0 -.5px 0 0 #fff1, inset 0 .5px 0 0 #0007);
    --shadow-1: 0 1px 2px -1px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%));
    --shadow-2: 0 3px 5px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 7px 14px -5px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 5%));
    --shadow-3: 0 -1px 3px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 2%)), 0 1px 2px -5px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 2%)), 0 2px 5px -5px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 4%)), 0 4px 12px -5px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 5%)), 0 12px 15px -5px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 7%));
    --shadow-4: 0 -2px 5px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 2%)), 0 1px 1px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 2px 2px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 5px 5px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 4%)), 0 9px 9px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 5%)), 0 16px 16px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 6%));
    --shadow-5: 0 -1px 2px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 2%)), 0 2px 1px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 5px 5px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 10px 10px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 4%)), 0 20px 20px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 5%)), 0 40px 40px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 7%));
    --shadow-6: 0 -1px 2px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 2%)), 0 3px 2px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 7px 5px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 3%)), 0 12px 10px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 4%)), 0 22px 18px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 5%)), 0 41px 33px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 6%)), 0 100px 80px -2px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 7%));
    --inner-shadow-0: inset 0 0 0 1px oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%));
    --inner-shadow-1: inset 0 1px 2px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%)), var(--inner-shadow-highlight);
    --inner-shadow-2: inset 0 1px 4px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%)), var(--inner-shadow-highlight);
    --inner-shadow-3: inset 0 2px 8px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%)), var(--inner-shadow-highlight);
    --inner-shadow-4: inset 0 2px 14px 0 oklch(var(--shadow-color) / calc(var(--shadow-strength)  + 9%)), var(--inner-shadow-highlight);
  }

  :root {
    --icon-size: min(1em, 100%);
    --icon-x: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' opacity='0.8' stroke-width='2' stroke-linecap='round' vector-effect='non-scaling-stroke' stroke-linejoin='round' %3E%3Cpath d='M18 6 6 18'/%3E%3Cpath d='m6 6 12 12'/%3E%3C/svg%3E");
    --icon-check: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' stroke-linecap='round' stroke-linejoin='round' vector-effect='non-scaling-stroke' stroke-width='2' d='M20 6L9 17l-5-5'/%3E%3C/svg%3E");
    --icon-chevron-down: light-dark(url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' vector-effect='non-scaling-stroke' stroke-linejoin='round' opacity='0.8' stroke-width='2' d='m6 9l6 6l6-6'/%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' stroke-linecap='round' vector-effect='non-scaling-stroke' stroke-linejoin='round' stroke-width='2' opacity='0.8' d='m6 9l6 6l6-6'/%3E%3C/svg%3E"));
    --icon-chevron-right: light-dark(url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' opacity='.8' stroke-linecap='round' stroke-linejoin='round' vector-effect='non-scaling-stroke'  stroke-width='2' d='m9 18l6-6l-6-6'/%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' opacity='.8' stroke-linecap='round' stroke-linejoin='round' vector-effect='non-scaling-stroke'  stroke-width='2' d='m9 18l6-6l-6-6'/%3E%3C/svg%3E"));
    --delete-icon: light-dark(url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M18 6L6 18M6 6l12 12'/%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M18 6L6 18M6 6l12 12'/%3E%3C/svg%3E"));
  }
}

@layer components {
  :where(body) {
    font-size: var(--font-size-sm);
  }

  :where(h1) {
    font-size: var(--font-size-2xl);
  }

  :where(h2) {
    font-size: var(--font-size-xl);
  }

  :where(h3) {
    font-size: var(--font-size-lg);
  }

  :where(h4) {
    font-size: var(--font-size-md);
  }

  :where(h5) {
    font-size: var(--font-size-sm);
  }

  button, input[type="submit"], input[type="reset"], input[type="clear"], input[type="button"], a[role="button"], input[type="file"]::file-selector-button {
    --_padding: var(--input-padding-size);
    --_padding-pow: 3;
    padding-block: var(--_padding);
    padding-inline: calc(var(--_padding) * var(--_padding-pow));
    border: var(--input-border-size) solid var(--color-primary-10);
    background-color: var(--color-primary-10);
    border-radius: var(--input-radius-size);
    color: var(--color-gray-2);
    font-family: inherit;
    font-weight: 600;
    transition: all .2s;

    &:hover, &:focus-visible {
      background-color: var(--color-primary-9);
      border-color: var(--color-primary-9);
    }

    &:active {
      background-color: var(--color-primary-11);
      border-color: var(--color-primary-11);
    }
  }

  details {
    --_padding-pow: 3;
    --_padding-block: var(--input-padding-size);
    --_padding-inline: calc(var(--_padding-block) * var(--_padding-pow));
  }

  details > summary {
    padding-block: var(--_padding-block);
    padding-inline: var(--_padding-inline);
    border: var(--input-border-size) solid var(--color-primary-10);
    background-color: var(--color-primary-10);
    border-radius: var(--input-radius-size);
    color: var(--color-gray-2);
    font-weight: 600;
    transition: all .2s;

    &:hover, &:focus-visible, &:active {
      background-color: var(--color-primary-9);
      border-color: var(--color-primary-9);
    }
  }

  summary::-webkit-details-marker {
    display: none;
  }

  details[open] > summary:first-of-type {
    background-color: var(--color-primary-9);
    border-color: var(--color-primary-9);
  }

  details > div {
    border-radius: var(--input-radius-size);
    background: var(--color-surface-bright);
    padding: var(--_padding-inline);
    border: var(--input-border-size) solid var(--color-separator);
    margin-block-start: var(--spacing-4xs);
  }

  details > summary::marker {
    content: "";
  }

  details > summary {
    --_icon-rotation: rotate(0deg);
    padding-inline-end: calc(var(--_padding-inline)  + 1ch);
    position: relative;

    &:after {
      content: "";
      background-image: var(--icon-chevron-right);
      top: 0;
      right: calc(var(--_padding-inline)  - 1em / 2);
      transform: var(--_icon-rotation);
      background-position: 50%;
      background-repeat: no-repeat;
      width: 1em;
      height: 100%;
      transition: all .2s;
      display: inline-block;
      position: absolute;
    }
  }

  details[open] > summary {
    --_icon-rotation: rotate(90deg);
  }

  [role="group"] > details + details {
    margin-block-start: var(--spacing-4xs);
  }

  @keyframes fadeInDown {
    0% {
      opacity: 0;
      transform: translateY(calc(-1 * var(--spacing-4xs)));
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  details[open] > div {
    animation-name: fadeInDown;
    animation-duration: .4s;
  }

  dialog {
    opacity: 0;
    transition-behavior: allow-discrete;
    overscroll-behavior: contain;
    border: var(--input-border-size) solid var(--color-separator);
    border-radius: var(--input-radius-size);
    box-shadow: var(--shadow-3);
    background-color: var(--color-surface-bright);
    max-block-size: calc(100% - 4rlh);
    inline-size: min(48rem, 100% - 4rlh);
    padding: 0;
    transition-duration: .4s;
    translate: 0 25vh;
  }

  dialog > form {
    flex-direction: column;
    display: flex;
  }

  dialog > form > div > * + * {
    margin-block-start: 1em;
  }

  dialog header, dialog footer {
    padding: var(--spacing-md);
    background: var(--color-surface-bright);
    z-index: 1;
    position: sticky;
  }

  dialog header {
    top: 0;
  }

  dialog footer {
    bottom: 0;
  }

  dialog header {
    border-block-end: var(--input-border-size) solid var(--color-separator);
    justify-content: space-between;
    align-items: center;
    display: flex;
  }

  dialog header h2 {
    font-size: var(--font-size-lg);
  }

  dialog footer {
    justify-content: center;
    align-items: center;
    gap: var(--spacing-4xs);
    border-block-start: var(--input-border-size) solid var(--color-separator);
    display: flex;
  }

  dialog > form > div {
    padding: var(--spacing-lg);
  }

  dialog header > button {
    margin-inline: auto 0;
  }

  dialog[open] {
    opacity: 1;
    display: block;
    translate: 0;

    @starting-style {
      & {
        opacity: 0;
        translate: 0 25vh;
      }
    }
  }

  dialog[open]::backdrop {
    display: none;
  }

  body:has(dialog) {
    transition-behavior: allow-discrete;
    transition-property: filter;
    transition-duration: .4s;
  }

  body:has(dialog[open]) {
    overscroll-behavior: contain;
    filter: blur(5px) grayscale();
    overflow: clip;

    @starting-style {
      & {
        filter: blur() grayscale(0);
      }
    }
  }

  dialog button[aria-label] {
    aspect-ratio: 1;
    min-height: unset;
    background-image: var(--icon-x);
    background-position: 50%;
    background-repeat: no-repeat;
    background-size: 1.25em;
    inline-size: 2.5rem;
  }

  [popover] {
    border: var(--input-border-size) solid var(--color-separator);
    border-radius: var(--input-radius-size);
    box-shadow: var(--shadow-3);
    background-color: var(--color-surface-bright);
    padding: 0;
  }

  [popovertarget="menu"] {
    anchor-name: --menu;
  }

  nav[popover] {
    position-anchor: --menu;
    left: anchor(--menu left);
    top: anchor(--menu bottom);
    margin: 0;
    margin-block-start: var(--spacing-4xs);
    position: absolute;
  }

  nav[popover] ul {
    padding-block: var(--spacing-4xs);
    flex-direction: column;
    min-inline-size: 20ch;
    display: flex;
  }

  nav[popover] li {
    flex-direction: column;
    display: flex;
  }

  nav[popover] li a {
    padding-block: calc(var(--input-padding-size) / 2);
    padding-inline: calc(var(--input-padding-size) * 3);
  }

  [popover] {
    opacity: 0;
    transform: translateY(calc(-1 * var(--spacing-4xs)));
    transform-origin: top;
    transition-behavior: allow-discrete;
    transition-duration: .4s;
  }

  [popover]:popover-open {
    opacity: 1;
    transition: opacity .4s, transform .4s;
    transform: translateY(0);

    @starting-style {
      & {
        opacity: 0;
        transform: translateY(calc(-1 * var(--spacing-4xs)));
      }
    }
  }

  figure:has(table) {
    width: 100%;
    max-width: 100%;
    overflow-x: auto;
  }

  :where(table) {
    border-collapse: collapse;
    border-spacing: 0;
    text-indent: 0;
    border-block: 0;
    width: 100%;
  }

  thead {
    background-color: var(--color-surface-dim);
    border-block-end: var(--border-2) solid var(--color-separator);
    font-weight: 600;
  }

  thead th:not([align="center"]):not([align="right"]) {
    text-align: start;
  }

  th {
    font-weight: var(--font-weight-bold);
  }

  tbody tr {
    border-block-start: var(--border-1) solid var(--color-separator);
  }

  th, td {
    font-feature-settings: "tnum" 1;
    padding: calc(var(--spacing-xs) / 2) var(--spacing-xs);
  }

  tfoot {
    border-block-start: var(--border-2) solid var(--color-separator);
    background-color: var(--color-surface-dim);
    border-block-end: 0;
    font-weight: 600;
  }

  tbody tr {
    --_row-bg: initial;
    background: var(--_row-bg);
  }

  tbody tr:nth-child(2n) {
    --_row-bg: var(--color-surface-bright);
  }

  ::placeholder {
    color: var(--color-ink-muted);
    opacity: 1;
    font-style: italic;
  }

  legend {
    padding: 0;
  }

  fieldset {
    border: 0;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  input:not([type="submit"], [type="reset"], [type="file"], [type="range"]), textarea, select {
    --_padding: var(--input-padding-size);
    --_padding-pow: 1.5;
    --_padding-inline: calc(var(--_padding) * var(--_padding-pow));
    padding-block: var(--_padding);
    padding-inline: var(--_padding-inline);
    border-radius: var(--input-radius-size);
    border: var(--input-border-size) solid var(--color-separator);
    background: var(--color-surface-dim);

    &:focus-visible {
      color: var(--color-ink-contrast);
      background: var(--color-surface-bright);
    }

    &:hover, &:focus-visible {
      border-color: var(--color-separator-highlight);
    }
  }

  input[type="checkbox"], input[type="radio"] {
    aspect-ratio: 1;
    vertical-align: middle;
    appearance: none;
    border: var(--input-border-size) solid var(--color-separator);
    background-color: var(--color-surface-dim);
    width: 1em;
    height: 1em;
    margin-top: -.25ex;
    padding: 0;
  }

  input[type="radio"] {
    border-radius: 100000px;

    &:checked {
      background-color: var(--color-checked);
      border-color: var(--color-accent);
      box-shadow: inset 0 0 0 .25em var(--color-accent);
    }
  }

  input[type="checkbox"]:checked {
    background-color: var(--color-accent);
    background-image: var(--icon-check);
    background-size: var(--icon-size);
    border-color: var(--color-accent);
    background-repeat: no-repeat;
  }

  select {
    appearance: none;
    background-image: var(--icon-chevron-down);
    background-repeat: no-repeat;
    background-size: var(--icon-size);
    background-position: calc(100% - var(--_padding-inline)) 50%;
    padding-inline-end: calc(var(--icon-size)  + 1ch + var(--_padding-inline));
  }

  select:invalid, option:disabled {
    color: var(--color-ink-muted);
    font-style: italic;
  }

  input[type="range"] {
    --_track-height: .5rem;
    --_thumb-size: 1.5rem;
    appearance: none;
    cursor: pointer;
    background: none;
    width: 100%;
  }

  input[type="range"]::-webkit-slider-runnable-track, input[type="range"]::-moz-range-track {
    background: light-dark(var(--color-gray-4), var(--color-gray-13));
    height: var(--_track-height);
    border-radius: 100000px;
  }

  input[type="range"]::-webkit-slider-thumb, input[type="range"]::-moz-range-thumb {
    appearance: none;
    height: var(--_thumb-size);
    width: var(--_thumb-size);
    background: var(--color-accent);
    border: 0;
    border-radius: 100000px;
  }

  input[type="range"]::-webkit-slider-thumb {
    margin-block-start: calc((var(--_track-height) / 2)  - (var(--_thumb-size) / 2));
  }

  input[type="range"]:focus-visible {
    outline: unset;
  }

  input[type="range"]:focus-visible::-webkit-slider-thumb, input[type="range"]:focus-visible::-moz-range-thumb {
    --_outline-size: 2px;
    outline-width: var(--_outline-size);
    outline-style: solid;
    outline-color: var(--color-focus);
    outline-offset: var(--_outline-size);
    border: 0;
  }

  input[type="range"]:focus-within, input[type="range"]:active {
    &::-webkit-slider-runnable-track, &::-moz-range-track {
      background: light-dark(var(--color-gray-5), var(--color-gray-12));
      transition: all .2s linear;
    }

    &::-webkit-slider-thumb, &::-moz-range-thumb {
      background: var(--color-primary-9);
      transition: all .2s linear;
      transform: scale(1.25);
    }
  }

  input:is([type="date"], [type="datetime-local"], [type="time"], [type="month"]) {
    height: calc((var(--font-size-sm) * 1.5)  + (var(--input-padding-size) * 2)  + (var(--input-border-size) * 2));
  }
}

@layer layout {
  html {
    color-scheme: light dark;
    color: var(--color-ink);
    background: var(--color-surface);
    accent-color: var(--color-accent);
  }

  html[data-theme="light"] {
    color-scheme: light;
  }

  html[data-theme="dark"] {
    color-scheme: dark;
  }

  ::selection {
    background: color-mix(in oklch, var(--color-primary-8), transparent 70%);
  }

  a {
    color: var(--color-anchor);
    transition: all .2s;

    &:hover, &:focus-visible {
      color: var(--color-anchor-hover);
      text-decoration: none;
    }

    &:active {
      color: var(--color-anchor-active);
    }
  }

  hr {
    color: var(--color-separator);
  }

  h1 {
    color: var(--color-ink-primary);
  }

  mark {
    --primary-hue: var(--hue-yellow);
    background: var(--color-surface-highlight);
    padding: .015ex .25ch;
  }

  strike {
    --primary-hue: var(--hue-red);
    text-decoration-line: line-through;
    text-decoration-color: var(--color-primary-8);
  }

  ins {
    --primary-hue: var(--hue-green);
    color: var(--color-ink-primary);
  }

  code {
    background-color: var(--color-surface-dim);
    border-radius: .15em;
  }

  pre code {
    background-color: unset;
    border-radius: unset;
  }

  code, kbd {
    color: var(--color-ink-contrast);
    padding: .015ex .25ch;
  }

  kbd {
    outline: var(--input-border-size) solid var(--color-separator);
    outline-offset: 1px;
  }

  .muted {
    color: var(--color-ink-muted);
  }

  .surface {
    background: light-dark(var(--color-gray-1), var(--color-gray-13));
    padding: var(--spacing-2);
  }

  .well {
    background: light-dark(var(--color-gray-3), var(--color-gray-15));
    padding: 1lh;
  }
}

@layer utilities;
